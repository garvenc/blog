本文更新于2019-08-18，使用MySQL 5.7，操作系统为Deepin 15.4。

[TOC]

一旦数据库对象设计完毕并投入使用，再进行修改就比较麻烦。

# 优化表的数据类型

```sql
select_statement PROCEDURE ANALYSE([max_elements[, max_memory]])
```

对输出的每一列的数据类型提出优化建议，用户根据实际情况酌情考虑。参数的含义是：不要为超过max_elements个值或max_memory字节的`ENUM`类型提出建议。

# 通过拆分提高表的访问效率

* 垂直拆分：把主键和一些列放到一个表中，把主键和另外的列放到另一个表中。
* 水平拆分：根据一列或多列的值把数据行放到多个表中。水平拆分会给应用增加复杂度，通常在查询时需要多个表名。

# 逆规范化

常用的逆规范化技术有：

* 增加冗余列：在多个表中有相同的列，用来在查询时避免连接操作。
* 增加派生列：增加的列来自其他表中的数据经过计算而成，用来在查询时减少连接操作，避免使用聚合函数。
* 重新组表：如果经常需要查看两个表连接出来的结果，则把这两个表重新组成一个表来避免连接。
* 分割表：即垂直拆分和水平拆分。

逆规范化需要维护数据的完整性，常用的方法是：

* 批处理维护
* 应用逻辑
* 触发器

# 使用中间表提高统计查询效率

* 中间表复制源表部分数据，并且与源表隔离，在中间表上做统计查询不会对在线应用产生负面影响。
* 中间表可以灵活添加索引或临时字段，从而提高统计查询的效率。
